# 4. Transformations


The 2D transformation matrix is:

$$
\mathbf{Q} = \begin{bmatrix}
i' \cdot i & i' \cdot j \\
j' \cdot i & j' \cdot j
\end{bmatrix}
=
\begin{bmatrix}
\cos\theta & -\sin\theta \\
\sin\theta & \cos\theta
\end{bmatrix}

$$

> When $q \to q'$ is a counterclockwise shift of $\theta$ 

If you want to swap the sign of the angle, you can do:

$$\mathbf Q' = \mathbf Q^{\rm T}$$


The 3D transformation matrix is:

$$
\mathbf Q = \begin{bmatrix}
i' \cdot i & i' \cdot j & i' \cdot k \\
j' \cdot i & j' \cdot j & j' \cdot k \\
k' \cdot i & k' \cdot j & k' \cdot k
\end{bmatrix}
$$

To shift a vector, you can do:

$$\vec v' = [\mathbf Q] \vec v$$

---

## Stress Transformations

To do a **stress transformation**, the [Stress Tensor](Stress%20Tensors.md) $\boldsymbol \sigma$ can be manipulated by:

$$\boldsymbol \sigma ' = [\mathbf Q] [\boldsymbol \sigma] [\mathbf Q]^{\text{T}}$$

If you are only interested with the normal stress in a certain direction:

$$\sigma_{nn} = (\vec n) ^{\text{T}}[\boldsymbol \sigma] (\vec n)$$

where $\vec n$ is the normal vector.

Then, the shear stress in a certain direction is:

$$\sigma_{nt} = (\vec n)^{\text T}[\boldsymbol \sigma ] (\vec t) = (\vec t)^{\text T}[\boldsymbol \sigma ] (\vec n)$$

where is the normal vector and $\vec t$ is the direction of shear (perpendicular to $\vec n$). 


## Principle Stresses

If you sweep over the stress values for a (2D) stress elements, you will get something like this:

![[stress-rot.png]]

Given the values at $\theta = 0$:
- $\sigma_{xx} = 20.0 \text{ MPa}$ 
- $\sigma_{yy} = 30.0 \text{ MPa}$
- $\tau_{xy}= 40.0 \text{ MPa}$

Notice that the normal stresses have a **max/min every 90Â°**, and when $\sigma_{x'x'}$ is maximum, $\sigma_{y'y'}$ is minimum; the same is true vice versa. 

![|313x284](excalidraw-2025-10-23-18.23.25.excalidraw.svg)
%%[ðŸ–‹ Edit in Excalidraw](excalidraw-2025-10-23-18.23.25.excalidraw.md)%%

Flipping the element 180Â° means that $\sigma_{xx}$ will be the same (still in tension). But flipping it 90Â° (or any multiple of 90Â°) means $\sigma_{xx}$ will be at its minimum (in this case, zero). 

**Whenever normal stresses are at their maxima or minima, shear stress zero. Here, the normal stresses are the *principle stresses.*** 

Principle Stresses (2D):
- Max/Min normal stresses where there is *no shear stress*
- Occur when the element is rotated at angle $\theta_p$ 
- The principle stresses are $\sigma_1$ and $\sigma_2$, where $\sigma_1$ is at its max and $\sigma_2$ is at its min. Hence, it is always true that $\sigma_1 > \sigma_2$. 

In 3D, there is a third principle stress $\sigma_3$. 

Good video illustrating all of this is here:

```vid
https://www.youtube.com/watch?v=_DH3546mSCM
Title: Understanding Stress Transformation and Mohr's Circle
Author: The Efficient Engineer
Thumbnail: https://i.ytimg.com/vi/_DH3546mSCM/mqdefault.jpg
AuthorUrl: https://www.youtube.com/@TheEfficientEngineer
```

## Eigenvalue Analysis for Principle Stress

The max/min normal stress is called the **principal stress**. When normal stress is maximum, there will be *no shear stresses.* 

> You can think of taking a slice in such a way that all axis are "balanced" into one direction.

We can solve this using an **eigenvalue problem**. (I don't fully understand the derivation.)


$$[\boldsymbol \sigma ] (\vec n ) = \sigma _p (\vec n)$$

We can see that this is an eigenvalue problem; it fits the form of $\mathbf A\vec x = \lambda\vec x$ . 


To solve this in python:

```python
import numpy as np

sigma = np.array([[4, 2],
                  [1, 3]])
              
eigenvalues, eigenvectors = np.linalg.eig(sigma)
```


`eigenvalues` is a 1D array for $\sigma_p$ , and `eigenvectors` is a 2D array for $\vec n$, where each column is a new $\vec n$. 


For a **2D problem**, you will get *two eigenvalues* $\sigma _1 , \sigma_2$. (`numpy` won't order these by default; you need to make sure $\sigma _1 > \sigma _2$).  From these, you can compute the maximum stress (in-plane to the rest of the problem):


$$\tau_{\max} = \frac{\sigma_1- \sigma_2}{2}$$
^max-2d-shear

Because $\sigma_1$ and $\sigma_2$ exist only when $\tau = 0$, this $\tau_{\text{max}}$ occurs **in a different rotation**, where $\theta \ne \theta_p$. 

For a **3D problem**, there are three principle stresses $\sigma_1, \sigma_2, \sigma_3$. The maximum shear stress that *may likely not lay within the same plane* is:

$$\tau _{\max} = \frac{\sigma_1 -\sigma_3}{2}$$
^max-3d-shear
