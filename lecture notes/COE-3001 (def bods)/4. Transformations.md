# 4. Transformations


The 2D transformation matrix is:

$$
\mathbf{Q} = \begin{bmatrix}
i' \cdot i & i' \cdot j \\
j' \cdot i & j' \cdot j
\end{bmatrix}
=
\begin{bmatrix}
\cos\theta & -\sin\theta \\
\sin\theta & \cos\theta
\end{bmatrix}

$$

> When $q \to q'$ is a counterclockwise shift of $\theta$ 

The 3D transformation matrix is:

$$
\mathbf Q = \begin{bmatrix}
i' \cdot i & i' \cdot j & i' \cdot k \\
j' \cdot i & j' \cdot j & j' \cdot k \\
k' \cdot i & k' \cdot j & k' \cdot k
\end{bmatrix}
$$

To shift a vector, you can do:

$$\vec v' = [\mathbf Q] \vec v$$

---

To do a **stress transformation**, the [Stress Tensor](Stress%20Tensors.md) $\boldsymbol \sigma$ can be manipulated by:

$$\boldsymbol \sigma ' = [\mathbf Q] [\boldsymbol \sigma] [\mathbf Q]^{\text{T}}$$

If you are only interested with the normal stress in a certain direction:

$$\sigma_{nn} = (\vec n) ^{\text{T}}[\boldsymbol \sigma] (\vec n)$$

where $\vec n$ is the normal vector.

Then, the shear stress in a certain direction is:

$$\sigma_{nt} = (\vec n)^{\text T}[\boldsymbol \sigma ] (\vec t) = (\vec t)^{\text T}[\boldsymbol \sigma ] (\vec n)$$

where is the normal vector and $\vec t$ is the direction of shear (perpendicular to $\vec n$). 


---

If you sweep over the stress values for a (2D) stress elements, you will get something like this:

![[stress-rot.png]]

Given the values at $\theta = 0$:
- $\sigma_{xx} = 20.0 \text{ MPa}$ 
- $\sigma_{yy} = 30.0 \text{ MPa}$
- $\tau_{xy} Â  = 40.0 \text{ MPa}$


## Eigenvalue Analysis for Principle Stress

The max/min normal stress is called the **principal stress**. When normal stress is maximum, there will be *no shear stresses.* 

> You can think of taking a slice in such a way that all axis are "balanced" into one direction.

We can solve this using an **eigenvalue problem**. (I don't fully understand the derivation.)


$$[\boldsymbol \sigma ] (\vec n ) = \sigma _p (\vec n)$$

We can see that this is an eigenvalue problem; it fits the form of $\mathbf A\vec x = \lambda\vec x$ . 


To solve this in python:

```python
import numpy as np

sigma = np.array([[4, 2],
                  [1, 3]])
              
eigenvalues, eigenvectors = np.linalg.eig(A)
```


`eigenvalues` is a 1D array for $\sigma_p$ , and `eigenvectors` is a 2D array for $\vec n$, where each column is a new $\vec n$. 


For a **2D problem**, you will get *two eigenvalues* $\sigma _1 , \sigma_2$. (`numpy` won't order these by default; you need to make sure $\sigma _1 > \sigma _2$).  From these, you can compute the **maximum *in-plane* shear stress** is:


$$\tau_{\max} = \frac{\sigma_1- \sigma_2}{2}$$

Then, the *maximum shear stress **(in any plane)*** for:

- If $\sigma_1 > 0$ and $\sigma_2 < 0$, the three principal stresses are $(\sigma_1, 0, \sigma_2)$:
	  $$
	  \tau_{max} = \frac{\sigma_1 - \sigma_2}{2}
	  $$

- If $\sigma_1 > 0$ and $\sigma_2 > 0$, the three principal stresses are $(\sigma_1, \sigma_2, 0)$:
	  $$
	  \tau_{max} = \frac{\sigma_1 - 0}{2} = \frac{\sigma_1}{2}
	  $$

- If $\sigma_1 < 0$ and $\sigma_2 < 0$, the three principal stresses are $(0, \sigma_1, \sigma_2)$:
	  $$
	  \tau_{max} = \frac{0 - \sigma_2}{2} = -\frac{\sigma_2}{2}
	  $$


